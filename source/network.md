---
title: 计算机网络
date: 2022-01-18 16:30:52
tags: 
- network
categories: basic
---

## 历史与简介
- 电话，电话网络
- 邮电局，接线员与单点故障
- 冷战背景
- 核弹炸不坏的通信
- IP internet protocol (网络层)
- IPv4 vs IPv6

在上个世纪，人们的最先进的通讯技术，是电话。
我们通过拨号，接通电话链接，再相互通信。
在电视上，我们还经常看到电话接线员在一个房间里，拔插头，插插头。 
这是当时很重要的一个部门，邮电局。
![upload error](source/_posts/basic/assets/jGGGSd.png)


随着冷战的来临，电话通信渐渐显示出弊端，就是单点故障。
只要把一个邮电局炸了，整个地区的通信就会瘫痪。
一旦通信故障，就是一个致命的问题。

所以美国国防部想要一个连核弹都炸不坏的通信系统。

所以网络协议IP（Internet Protocol）应运而生。

它通过建立一个一个基站，把线路都连接起来，就像一个网。
通过IP地址来寻址，找到对应的终端。

这样，如果炸坏了一个基站，还可以走别的线路。



<!--more-->

## 网络分层模型
网络分层就是将网络节点所要完成的数据的发送或转发、打包或拆包，控制信息的加载或拆出等工作，分别由不同的硬件和软件模块去完成。这样可以将往来通信和网络互连这一复杂的问题变得较为简单。

![](https://cp-images.oss-cn-hangzhou.aliyuncs.com/DoyVUQ.png)

我们常用的就是右边的五层模型。

如果我们把网络必做送快递。

物理层就是基础设施，就是路，高铁，飞机，是实实在在存在的。

数据链路层，就是我们的快递线路。
如果需要把快递从上海送到北京，
我们可以直达，可以从南京中转，甚至可以从新疆绕一圈。





## TCP与UDP （传输层）
### TCP

三次握手、四次挥手
建立链接，路线确定
发送消息，基于流
避免装包、拆包
速率控制
失败重传

端口级别

很多协议的基石
HTTP(s)、FTP、Dubbo

![](https://cp-images.oss-cn-hangzhou.aliyuncs.com/SxZ9xf.png)

特点：
面向链接
点对点 P2P
可靠交付
面向流

### UDP
无连接
尽量交付
面向报文

把数据封装成一个一个的数据包，然后就不管了

视频、语音聊天  可以容忍丢包

## Socket、HTTP与HTTPS

Socket
一个Socket连接：四元组：src ip, src port, dest ip, dest port
建立一个Socket连接，就是建立了一个传输通道


对TCP协议对又一层封装

基于包对概念

一个请求 或 响应 就是一个数据包

粘包，拆包

Head and body

### 手动实现一个简单的Http服务

